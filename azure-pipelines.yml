trigger: none

jobs:
  - template: CI/job-doxygen.yml
 
  - job: MacOS
    strategy:
      matrix:
        mojave-std:
          image: macOS-10.14
          name: mojave
          version: 10.12
          buildType: "standard"
          prefix: "synergy"
        mojave-ent:
          image: macOS-10.14
          name: mojave
          version: 10.12
          buildType: "enterprise"
          prefix: "synergy-enterprise"
        catalina-std:
          image: macOS-10.15
          name: catalina
          version: 10.14
          buildType: "standard"
          prefix: "synergy"
        catalina-ent:
          image: macOS-10.15
          name: catalina
          version: 10.14
          buildType: "enterprise"
          prefix: "synergy-enterprise"
    pool:
      vmImage: $[ variables['image'] ]

    #As apparently the trigger set to none doesn't work
    condition: eq(variables['Build.Reason'], 'Manual')

    variables:
      QT_PATH: '/usr/local/opt/qt/bin'

    steps:
      - template: CI/checkout.yml
      - template: CI/MacOS/mac-build.yml
